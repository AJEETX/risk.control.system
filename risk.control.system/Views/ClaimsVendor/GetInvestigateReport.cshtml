@model ClaimsInvestigationVendorsModel

@{
    ViewData["Title"] = @Applicationsettings.SERVICE;
}
<style>
    .supervisor-doc{
        height: 2.4rem;
        border:1px solid #ccc;
    }
</style>
<section class="content pt-2">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <form id="create-form" method="post">
                    <input type="hidden" id="claimId" name="claimId" value="@Model.ClaimsInvestigation.ClaimsInvestigationId" />
                    <input type="hidden" id="CaseLocationId" name="CaseLocationId" value="@Model.CaseLocation.CaseLocationId" />
                    <div id="article" class="card card-secondary">
                        <div class="card-header">
                            <h3 class="card-title"><i class="far fa-file-archive"></i> Agent Report</h3>
                        </div>
                        @{
                            string address = string.Empty;
                            string baddress = string.Empty;
                            int currentAgeinYrs = 0;
                            bool customerExist = false;
                            bool beneficiaryExist = false;
                            if (Model.ClaimsInvestigation != null)
                            {
                                address = @Model.ClaimsInvestigation?.CustomerDetail.Addressline + " " + @Model.ClaimsInvestigation?.CustomerDetail.District.Name + " " + @Model.ClaimsInvestigation?.CustomerDetail.State.Name + " " +
                                @Model.ClaimsInvestigation?.CustomerDetail.Country.Name + " " + @Model.ClaimsInvestigation?.CustomerDetail.PinCode.Code;
                                baddress = @Model.CaseLocation != null ? @Model.CaseLocation?.Addressline + " " +
                                @Model.CaseLocation?.District?.Name + " " + @Model.CaseLocation?.State?.Name + " " +
                                @Model.CaseLocation?.Country?.Name + " " + @Model.CaseLocation?.PinCode?.Code : string.Empty;
                                if (Model.ClaimsInvestigation?.CustomerDetail.CustomerDateOfBirth != null)
                                {
                                    var age = DateTime.Now.Subtract(Model.ClaimsInvestigation.CustomerDetail.CustomerDateOfBirth).TotalDays;
                                    currentAgeinYrs = (int)age / 365;
                                }
                            }
                            if (!string.IsNullOrWhiteSpace(Model.ClaimsInvestigation.PolicyDetail.ContractNumber))
                            {
                                customerExist = true;
                            }
                            if (Model.CaseLocation?.CaseLocationId > 0)
                            {
                                beneficiaryExist = true;
                            }
                            string customerProgressColor = "grey";
                            if (@customerExist)
                            {
                                customerProgressColor = "green";
                            }
                            string benficiaryProgressColor = "lightgrey";
                            if (@customerExist && @beneficiaryExist)
                            {
                                benficiaryProgressColor = "green";
                            }
                            if (@customerExist && !@beneficiaryExist)
                            {
                                benficiaryProgressColor = "grey";
                            }
                            if (!@customerExist && !@beneficiaryExist)
                            {
                                benficiaryProgressColor = "lightgrey";
                            }
                            <div class="card-body">
                                <article>
                                    <div class="bb-blog-inner">
                                        <header class="bb-blog-header">
                                        <h5 class="bb-blog-title" itemprop="name"><i class="far fa-file-powerpoint"></i> Policy # : @Model.ClaimsInvestigation.PolicyDetail.ContractNumber</h5>
                                        </header>
                                        <div class="card card-solid">
                                            <div class="progress">
                                                <i class="far fa-bookmark" style="font-size:1.1rem;"></i>
                                                <div class="progress-bar" role="progressbar" style="width:32.5%;background-color:green;">
                                                    policy
                                                </div>
                                                <i class="far fa-caret-square-right" style="font-size:1.1rem;"></i>
                                                <div class="progress-bar" role="progressbar" style="width:32.33%;background-color:@customerProgressColor">
                                                    customer
                                                </div>
                                                <i class="far fa-caret-square-right" style="font-size:1.1rem;"></i>

                                                <div class="progress-bar" role="progressbar" style="width:33.34%;background-color:@benficiaryProgressColor">
                                                    beneficiary
                                                </div>
                                            </div>
                                            <div class="card-body pb-0">
                                                <div class="row">
                                                    <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="far fa-file-powerpoint"></i> Policy Details
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-7">
                                                                        <h2 class="lead"><b>@Model.ClaimsInvestigation?.PolicyDetail.LineOfBusiness.Name</b></h2>
                                                                        <p class="text-muted text-sm">
                                                                            <b>Claim Type: </b>@Model.ClaimsInvestigation?.PolicyDetail.ClaimType
                                                                        </p>
                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-money-bill-wave"></i>
                                                                                </span>
                                                                                Amount: <i class="fas fa-rupee-sign"></i>@Model.ClaimsInvestigation?.PolicyDetail.SumAssuredValue
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-tools"></i>
                                                                                </span>
                                                                                Service: @Model.ClaimsInvestigation?.PolicyDetail.InvestigationServiceType.Name
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-money-check-alt"></i>
                                                                                </span>
                                                                                Budget center: @Model.ClaimsInvestigation?.PolicyDetail.CostCentre.Name
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-sun"></i>
                                                                                </span>
                                                                                Reason: @Model.ClaimsInvestigation?.PolicyDetail.CaseEnabler.Name;
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="far fa-clock"></i>
                                                                                </span>
                                                                                Issue Date: @Model.ClaimsInvestigation?.PolicyDetail.ContractIssueDate.ToString("dd-MMM-yyyy")
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="col-5 text-center">
                                                                        @if (Model?.ClaimsInvestigation?.PolicyDetail.DocumentImage is not null)
                                                                        {
                                                                            <img id="documentImage" class="form-Image" src="data:image/*;base64,@(Convert.ToBase64String(Model?.ClaimsInvestigation.PolicyDetail.DocumentImage))">
                                                                        }
                                                                        else
                                                                        {
                                                                            <img id="documentImage" alt="user-avatar"
                                                                                 class="img-circle img-fluid form-Image" src="/img/document.jpeg">
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div class="text-right">
                                                                    <a href="#" class="btn btn-sm bg-teal">
                                                                        <i class="fas fa-comments"></i>
                                                                    </a>
                                                                    <a href="#" class="btn btn-sm btn-danger">
                                                                        <i class="far fa-file-powerpoint"></i> ...
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="fa fa-user-plus"></i> Customer Details
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-7">
                                                                        <h2 class="lead"><b>@Model.ClaimsInvestigation.CustomerDetail.CustomerName</b></h2>
                                                                        <p class="text-muted text-sm">
                                                                            <b>Occupation: </b> @Model.ClaimsInvestigation.CustomerDetail.CustomerOccupation
                                                                        </p>
                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-rupee-sign"></i>
                                                                                </span>
                                                                                Income: @Model.ClaimsInvestigation.CustomerDetail.CustomerIncome
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-rupee-sign"></i>
                                                                                </span>
                                                                                Age: @currentAgeinYrs
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-lg fa-building"></i>
                                                                                </span>
                                                                                Address: @address
                                                                            </li>

                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-lg fa-phone"></i>
                                                                                </span>
                                                                                Phone #: + @Model.ClaimsInvestigation.CustomerDetail.ContactNumber
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="col-5 text-center">
                                                                        @if (Model?.ClaimsInvestigation.CustomerDetail.ProfilePicture is not null)
                                                                        {
                                                                            <img id="profileImage" class="form-Image" src="data:image/*;base64,@(Convert.ToBase64String(Model?.ClaimsInvestigation.CustomerDetail.ProfilePicture))">
                                                                        }
                                                                        else
                                                                        {
                                                                            <img id="profileImage" class="form-Image" src="/img/user.png">
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div class="text-right">
                                                                    <a href="#" class="btn btn-sm bg-teal">
                                                                        <i class="fas fa-comments"></i>
                                                                    </a>
                                                                    <a href="#" class="btn btn-sm btn-warning">
                                                                        <i class="fa fa-user-plus"></i> ...
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="fas fa-user-tie"></i>  Beneficiary Details
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-7">
                                                                        <h2 class="lead"><b>@Model.CaseLocation?.BeneficiaryName</b></h2>
                                                                        <p class="text-muted text-sm">
                                                                            <b>Relation: </b> @Model.CaseLocation?.BeneficiaryRelation.Name
                                                                        </p>
                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-rupee-sign"></i>
                                                                                </span>
                                                                                Income: @Model.CaseLocation?.BeneficiaryIncome
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-lg fa-building"></i>
                                                                                </span>
                                                                                Address: @baddress
                                                                            </li>
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-lg fa-phone"></i>
                                                                                </span>
                                                                                Phone #: + @Model.CaseLocation?.BeneficiaryContactNumber
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="col-5 text-center">

                                                                        @if (Model?.CaseLocation?.ProfilePicture is not null)
                                                                        {
                                                                            <img id="profileImage" alt="user-avatar"
                                                                                 class="img-circle img-fluid form-Image" src="data:image/*;base64,@(Convert.ToBase64String(Model?.CaseLocation?.ProfilePicture))">
                                                                        }
                                                                        else
                                                                        {
                                                                            <img class="form-Image" id="profileImage" src="/img/user.png">
                                                                        }

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div class="text-right">
                                                                    <a href="#" class="btn btn-sm bg-teal">
                                                                        <i class="fas fa-comments"></i>
                                                                    </a>
                                                                    <a href="#" class="btn btn-sm btn-success">
                                                                        <i class="fas fa-user-tie"></i> ...
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div> <!-- class bb-blog-inner -->
                                </article>
                                <article>
                                    <div class="bb-blog-inner">
                                        <header class="bb-blog-header">
                                            <h5 class="bb-blog-title" itemprop="name"><i class="fas fa-user-shield"></i> Agent Investigation</h5>
                                        </header>
                                        <div class="card card-solid">
                                            <div class="progress">
                                                <i class="far fa-bookmark" style="font-size:1.1rem;"></i>
                                                <div class="progress-bar" role="progressbar" style="width:49%;background-color:green;">
                                                    investigation report
                                                </div>
                                                <i class="far fa-caret-square-right" style="font-size:1.1rem;"></i>
                                                <div class="progress-bar" role="progressbar" style="width:50%;background-color:red">
                                                    agent remarks
                                                </div>

                                            </div>
                                            <div class="card-body pb-0">
                                                <div class="row">
                                                    <div class="col-12 col-sm-6 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="fas fa-mobile-alt"></i> Investigation data
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-6">
                                                                        <h2 class="lead"><b> @Model.CaseLocation.BeneficiaryName</b></h2>
                                                                        <p class="text-muted text-sm">
                                                                            @{
                                                                                var QR1 = @Model.CaseLocation?.ClaimReport?.QrData ?? "QR SAMPLE DATA";
                                                                                var LongLat2 = @Model.CaseLocation?.ClaimReport?.LongLat ?? "SAMPLE CITY";
                                                                            }
                                                                            <b>QR data:<i class="fas fa-paperclip"></i> </b> @QR1
                                                                        </p>
                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">
                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="fas fa-money-bill-wave"></i>
                                                                                </span>
                                                                                Long Lat: <i class="fas fa-rupee-sign"></i> @LongLat2

                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="col-6 text-center">
                                                                        Location: <i class="fas fa-rupee-sign"></i>
                                                                        @{
                                                                            if (Model.CaseLocation.ClaimReport?.AgentLocationPicture != null)
                                                                            {
                                                                                <img id="agentLocationPicture" class="report-Image" src="/img/no-image.png">
                                                                            }
                                                                            else
                                                                            {
                                                                                <img id="documentImage" alt="user-avatar"
                                                                                     class="img-fluid form-Image" src="/img/no-photo.png">
                                                                            }
                                                                        }
                                                                        <br />
                                                                        OCR Doc: <i class="fas fa-rupee-sign"></i>
                                                                        @{
                                                                            if (Model.CaseLocation.ClaimReport?.AgentLocationPicture != null)
                                                                            {
                                                                                <img id="agentLocationPicture" class="report-Image" src="/img/no-image.png">
                                                                            }
                                                                            else
                                                                            {
                                                                                <img id="documentImage" alt="user-avatar"
                                                                                     class="img-fluid form-Image" src="/img/no-photo.png">
                                                                            }
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="fas fa-user-shield"></i> Agent remarks
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-12">

                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">

                                                                            <li class="small">
                                                                                <span class="fa-li">
                                                                                    <i class="far fa-comment"></i>
                                                                                </span>
                                                                                @Model.CaseLocation.ClaimReport?.AgentRemarks <i class="far fa-comment"></i>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                                <article>
                                    <div class="bb-blog-inner">
                                        <header class="bb-blog-header">
                                            <h5 class="bb-blog-title" itemprop="name"><i class="fas fa-user-edit"></i> Supervisor Report</h5>
                                        </header>
                                        <div class="card card-solid">
                                            <div class="progress">
                                                <i class="far fa-bookmark" style="font-size:1.1rem;"></i>
                                                <div class="progress-bar" role="progressbar" style="width:100%;">
                                                    supervisor report
                                                </div>
                                                <i class="far fa-bookmark" style="font-size:1.1rem;"></i>

                                            </div>
                                            <div class="card-body pb-0">

                                                <div class="row">
                                                    <div class="col-12 d-flex align-items-stretch flex-column">

                                                        <div class="card bg-light d-flex flex-fill">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="far fa-comment"></i> Supervisor comments
                                                            </div>
                                                            <div class="card-body pt-0">
                                                                <div class="row">
                                                                    <div class="col-12">

                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">

                                                                            <div class="form-group">
                                                                                <input maxlength="100" name="supervisorRemarks" id="supervisorRemarks" asp-for="CaseLocation.ClaimReport.SupervisorRemarks" type="text" class="form-control" />
                                                                            </div>
                                                                        </ul>
                                                                    </div>
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 d-flex align-items-stretch flex-column">
                                                        <div class="card bg-light d-flex flex-fill" style="border:1rem outset #ccc;">
                                                            <div class="card-header text-muted border-bottom-0">
                                                                <i class="fas fa-code"></i> Disclaimer
                                                            </div>
                                                            <div class="card-body pt-0 disclaimer-body">
                                                                <div class="row report-disclaimer">


                                                                    <div class="col-12">

                                                                        <ul class="ml-4 mb-0 fa-ul text-muted">
                                                                            <label>
                                                                                <p>Our Disclaimer was last updated on [___DATE___]</p>
                                                                                <p><strong>Interpretation and Definitions</strong></p>
                                                                                <p><strong>Interpretation</strong></p>
                                                                                <p>The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural.</p>
                                                                                <p><strong>Definitions</strong></p>
                                                                                <p>For the purposes of this Disclaimer:</p>
                                                                                <ul>
                                                                                    <li><strong>"Company"</strong> (referred to as either "the Company", "We", "Us" or "Our" in this Disclaimer) refers to [___COMPANY_INFORMATION___]</li>
                                                                                    <li><strong>"Service"</strong> refers to the Website.</li>
                                                                                    <li><strong>"You"</strong> means the individual accessing the Service, or the company, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable.</li>
                                                                                    <li><strong>"Website"</strong> refers to [___WEBSITE_NAME___], accessible from [___WEBSITE_URL___]</li>
                                                                                </ul>
                                                                                <p><strong>Disclaimer</strong></p>
                                                                                <p>The information contained on the Service is for general information purposes only.</p>
                                                                                <p>The Company assumes no responsibility for errors or omissions in the contents of the Service.</p>
                                                                                <p><strong>Fitness & Nutritional Information Disclaimer</strong></p>
                                                                                <p>The Service can offer health, fitness and nutritional information including, without limitation, advice and recommendation, that is provided solely as general education and informational purposes.</p>
                                                                                <p><strong>FTC Affiliate Disclaimer</strong></p>
                                                                                <p>The disclosure that follows is intended to fully comply with the Federal Trade Commission's policy of the United States that requires the Company to be transparent about any and all affiliate relations the Company may have on the Service.</p>
                                                                                <p>In no event shall the Company or its suppliers be liable for any special, incidental, indirect, or consequential damages whatsoever arising out of or in connection with your access or use or inability to access or use the Service.</p>
                                                                                <p><strong>"Use at Your Own Risk" Disclaimer</strong></p>
                                                                                <p>All information in the Service is provided "as is", with no guarantee of completeness, accuracy, timeliness or of the results obtained from the use of this information, and without warranty of any kind, express or implied, including, but not limited to warranties of performance, merchantability and fitness for a particular purpose.</p>
                                                                                <p>The Company will not be liable to You or anyone else for any decision made or action taken in reliance on the information given by the Service or for any consequential, special or similar damages, even if advised of the possibility of such damages.</p>
                                                                                <p><strong>Contact Us</strong></p>
                                                                                <p>If you have any questions about this Disclaimer, You can contact Us:</p>
                                                                                <ul>
                                                                                    <li>By visiting this page on our website: [___WEBSITE_CONTACT_PAGE_URL___]</li>
                                                                                    <li>By sending us an email: [___WEBSITE_CONTACT_EMAIL___]</li>
                                                                                </ul>
                                                                                <p></p>
                                                                            </label>

                                                                            <div class="form-group">
                                                                                <div class="custom-control custom-checkbox mr-sm-2">
                                                                                    <input type="checkbox" class="custom-control-input selected-case" id="selected-case" name="selected-case">
                                                                                    <label class="custom-control-label" for="selected-case"> I hereby consent to agree to the term and conditions.</label>
                                                                                </div>


                                                                            </div>
                                                                        </ul>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div class="text-right">
                                                                    <a asp-controller="ClaimsVendor" class="btn btn-default" asp-action="ClaimReport">
                                                                        <i class="fas fa-arrow-left" aria-hidden="true"></i> Back
                                                                    </a>
                                                                    <button disabled id="allocate-case" type="submit" asp-action="ProcessReport" class="btn btn-danger">
                                                                        <i class="far fa-file-alt" aria-hidden="true"></i> SUBMIT
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        }
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
@section Scripts    {
    <script>
        $(document).ready(function () {

            $('#create-form').on('submit', function (e) {
                var report = $('#supervisorRemarks').val();

                if (report == '') {
                    askConfirmation = false;
                    e.preventDefault();
                    $.alert({
                        title: "Claim Assignment !!!",
                        content: "Please enter comments?",
                        icon: 'fas fa-exclamation-triangle',
                        boxWidth: '30%',
                        useBootstrap: false,
                        type: 'red',
                        closeIcon: true,
                        buttons: {
                            cancel: {
                                text: "OK",
                                btnClass: 'btn-danger'
                            }
                        }
                    });
                }
            });
        });
    </script>
}