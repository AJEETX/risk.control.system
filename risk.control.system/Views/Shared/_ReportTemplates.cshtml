@model List<ReportTemplate>

<div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
        <thead>
            <tr>
                <th>Template Name</th>
                <th>Created</th>
                <th><i class="fas fa-id-badge"></i> Face IDs</th>
                <th><i class="fas fa-file-alt"></i> Documents</th>
                <th><i class="fas fa-film"></i> Media</th>
                <th><i class="fas fa-question-circle"></i> Questions</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var template in Model)
                {
                    var faceCount = template.LocationTemplate
                    .SelectMany(l => l.FaceIds)
                    .Count(i => i.Selected);

                    var docCount = template.LocationTemplate
                    .SelectMany(l => l.DocumentIds)
                    .Count(i => i.Selected);

                    var mediaCount = template.LocationTemplate
                    .SelectMany(l => l.MediaReports)
                    .Count(i => i.Selected);

                    var questionCount = template.LocationTemplate
                    .SelectMany(l => l.Questions)
                    .Count(); // all questions, no "Selected" property

                    <tr>
                        <td>@template.Name</td>
                       
                        <td>@template.Created.ToString("dd-MMM-yyyy")</td>
                        <td>@faceCount</td>
                        <td>@docCount</td>
                        <td>@mediaCount</td>
                        <td>@questionCount</td>
                        <td>
                            <a id="back" asp-action="Details" asp-controller="ReportTemplate" asp-route-id="@template.Id"
                               class="btn btn-sm btn-outline-secondary">
                                <i class="fas fa-eye"></i> View
                            </a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="7" class="text-center text-muted py-4">
                        <i class="fas fa-info-circle fa-lg me-2"></i> No report templates found.
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
