@using Microsoft.EntityFrameworkCore;
@using risk.control.system.Helpers;
@using risk.control.system.Models;
@inject SignInManager<ApplicationUser> SignInManager
@inject ApplicationDbContext context
@inject UserManager<ApplicationUser> UserManager
@model ClientCompany
@if (SignInManager.IsSignedIn(User))
{
    var roleCode = string.Empty;

    <div class="user-panel mt-3 pb-3 mb-3 d-flex">

        <div class="image">
            @if (UserManager.GetUserAsync(User).Result?.ProfilePictureUrl != null)

            {
                <img class="elevation-2 sidebar-profile img-circle" src="@UserManager.GetUserAsync(User).Result.ProfilePictureUrl" alt="user image">
            }
            else
            {
                <img class="elevation-0 sidebar-profile img-circle" src="@Applicationsettings.NO_USER" alt="user image">

            }
        </div>
        <a href="/companyuserprofile" class="d-block">
            @UserManager.GetUserAsync(User).Result?.FirstName
            @if (User.IsInRole(AppRoles.PORTAL_ADMIN.ToString()))
            {
                roleCode = @Applicationsettings.PORTAL_ADMIN.CODE;
                <span class="badge badge-danger">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.ADMIN.ToString()))
            {
                roleCode = @Applicationsettings.ADMIN.CODE;
                <span class="badge badge-warning">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.AGENCY_ADMIN.ToString()))
            {
                roleCode = @Applicationsettings.AGENCY_ADMIN.CODE;
                <span class="badge badge-info">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.CREATOR.ToString()))
            {
                roleCode = @Applicationsettings.CREATOR.CODE;
                <span class="badge badge-primary">@roleCode</span>
            }
           
            else if (User.IsInRole(AppRoles.ASSESSOR.ToString()))
            {
                roleCode = @Applicationsettings.ASSESSOR.CODE;
                <span class="badge badge-secondary">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.MANAGER.ToString()))
            {
                roleCode = @Applicationsettings.MANAGER.CODE;
                <span class="badge badge-secondary">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.SUPERVISOR.ToString()))
            {
                roleCode = @Applicationsettings.SUPERVISOR.CODE;
                <span class="badge badge-dark">@roleCode</span>
            }
            else if (User.IsInRole(AppRoles.AGENT.ToString()))
            {
                roleCode = @Applicationsettings.AGENT.CODE;
                <span class="badge badge-dark">@roleCode</span>
            }
        </a>
    </div>
}