@model CaseAgencyModel

@{
    var questionTime = @Model.CaseTask.InvestigationReport.AgentRemarksUpdated != null ? @Model.CaseTask.InvestigationReport.AgentRemarksUpdated.Value.ToString("dd-MMM-yy hh:mm tt") : null;
    <div class="card direct-chat direct-chat-warning collapsed-card">
        <div class="card-header">
            <h3 class="card-title">Mobile SMS</h3>
            <button type="button" class="btn btn-tool" data-bs-toggle="tooltip" title="Mobile SMS" data-widget="chat-pane-toggle">
                <i class="fas fa-comments"></i>
            </button>
            <div class="card-tools">
                <span data-bs-toggle="tooltip" title="SMS Messages" class="badge badge-light"><i class='far fa-hand-point-right'></i></span>
                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="direct-chat-messages">
                <div class="direct-chat-msg">
                    @if (Model.CaseTask.CaseMessages.Count > 0)
                    {
                        for (var i = 0; i < Model.CaseTask.CaseMessages.Count; i++)
                        {
                            if (i % 2 == 0)
                            {
                                <div class="direct-chat-msg">
                                    <div class="direct-chat-infos clearfix">
                                        <span class="direct-chat-name float-left">@Model.CaseTask.CaseMessages[i].SenderEmail</span>
                                        <span class="direct-chat-timestamp float-right">@Model.CaseTask.CaseMessages[i].Created.ToString("dd MMM hh:mm")</span>
                                    </div>
                                    <img class="direct-chat-img" src="/img/company-admin.jpeg" alt="sender image">
                                    <div class="direct-chat-text">
                                        @Model.CaseTask.CaseMessages[i].Message
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="direct-chat-msg right">
                                    <div class="direct-chat-infos clearfix">
                                        <span class="direct-chat-name float-right">@Model.CaseTask.CaseMessages[i].RecepicientEmail</span>
                                        <span class="direct-chat-timestamp float-left">@Model.CaseTask.CaseMessages[i].Created.ToString("dd MMM hh:mm")</span>
                                    </div>
                                    <img class="direct-chat-img" src="/img/agency-admin.jpeg" alt="recepient image">
                                    <div class="direct-chat-text">
                                        @Model.CaseTask.CaseMessages[i].Message
                                    </div>
                                </div>
                            }
                        }
                    }
                </div>
            </div>
        </div>
    </div>

}